<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>üìÖ Schedule ‚Äì MooVit</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #f4f6f9;
      color: #212529;
      transition: background-color 0.3s, color 0.3s;
    }

    header,
    footer,
    .card,
    .table,
    .form-control,
    .btn,
    .bg-light {
      transition: background-color 0.3s, color 0.3s;
    }

    .stat-card {
      text-align: center;
    }

    /* Dark Mode Styles */
    body.dark-mode {
      background-color: #121212;
      color: #f8f9fa;
    }

    body.dark-mode header,
    body.dark-mode footer {
      background-color: #1a1a1a !important;
      color: #f8f9fa !important;
    }

    body.dark-mode .card,
    body.dark-mode .form-control,
    body.dark-mode .btn,
    body.dark-mode .bg-light {
      background-color: #343a40 !important;
      color: #f8f9fa !important;
    }

    body.dark-mode .table-striped > tbody > tr:nth-of-type(odd) {
      --bs-table-accent-bg: #2a2a2a;
    }

    body.dark-mode .table-primary {
      background-color: #0d6efd !important;
    }

    #toggleMode {
      cursor: pointer;
    }
  </style>
</head>

<body>
  <header class="bg-primary text-white p-3 d-flex justify-content-between align-items-center">
    <h1 class="mb-0">üìÖ Schedule</h1>
    <div>
      <button id="toggleMode" class="btn btn-light me-2">üåû</button>
      <a href="../main.html" class="btn btn-light">‚Üê Home</a>
    </div>
  </header>

  <main class="container my-4">
    <!-- Statistics -->
    <div class="row g-3 mb-4 text-center">
      <div class="col-md-3 stat-card">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Scheduled Trips Today</h5>
            <p class="card-text fs-4" id="totalTrips">0</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 stat-card">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Completed Trips</h5>
            <p class="card-text fs-4" id="completedTrips">0</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 stat-card">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Pending Trips</h5>
            <p class="card-text fs-4" id="pendingTrips">0</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 stat-card">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Cancelled</h5>
            <p class="card-text fs-4" id="cancelledTrips">0</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Schedule Table -->
    <section>
      <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light">
          <h2 class="mb-0">Today's Schedule</h2>
        </div>
        <div class="card-body table-responsive">
          <table class="table table-striped align-middle">
            <thead class="table-primary">
              <tr>
                <th>Trip ID</th>
                <th>Vehicle</th>
                <th>Driver</th>
                <th>Route</th>
                <th>Departure</th>
                <th>ETA</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- JS will render rows -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Add New Trip -->
      <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light">
          <h2 class="mb-0">Add New Trip</h2>
        </div>
        <div class="card-body">
          <form id="addTripForm" onsubmit="addSchedule(event)" class="row g-3">
            <div class="col-md-2"><input type="text" class="form-control" id="newId" placeholder="Trip ID" required>
            </div>
            <div class="col-md-2"><input type="text" class="form-control" id="newVehicle" placeholder="Vehicle ID"
                required></div>
            <div class="col-md-2"><input type="text" class="form-control" id="newDriver" placeholder="Driver Name"
                required></div>
            <div class="col-md-3"><input type="text" class="form-control" id="newRoute" placeholder="Route (e.g. A ‚Üí B)"
                required></div>
            <div class="col-md-1"><input type="time" class="form-control" id="newDep" required></div>
            <div class="col-md-1"><input type="time" class="form-control" id="newEta" required></div>
            <div class="col-md-1"><button type="submit" class="btn btn-primary w-100">Add</button></div>
          </form>
        </div>
      </div>

      <!-- Chart -->
      <div class="card shadow-sm">
        <div class="card-header bg-light">
          <h2 class="mb-0">Trip Completion Trend (Last 7 Days)</h2>
        </div>
        <div class="card-body">
          <canvas id="scheduleChart"></canvas>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-light text-center py-2 mt-4">&copy; 2025 Transport Co.</footer>

  <script>
    // Dark Mode Toggle
    const toggleBtn = document.getElementById('toggleMode');
    const body = document.body;

    // Load saved theme
    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark-mode');
    }

    toggleBtn.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      if (body.classList.contains('dark-mode')) {
        localStorage.setItem('theme', 'dark');
      } else {
        localStorage.setItem('theme', 'light');
      }
      updateChartColors();
    });

    // Sample Chart
    const ctx = document.getElementById('scheduleChart').getContext('2d');
    const scheduleChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ["6 days ago", "5 days ago", "4 days ago", "3 days ago", "2 days ago", "Yesterday", "Today"],
        datasets: [{
          label: 'Completed Trips',
          data: [3, 5, 2, 6, 4, 7, 5],
          borderColor: '#0d6efd',
          backgroundColor: 'rgba(13,110,253,0.2)',
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            labels: {
              color: body.classList.contains('dark-mode') ? '#f8f9fa' : '#212529'
            }
          }
        },
        scales: {
          x: { ticks: { color: body.classList.contains('dark-mode') ? '#f8f9fa' : '#212529' } },
          y: { ticks: { color: body.classList.contains('dark-mode') ? '#f8f9fa' : '#212529' } }
        }
      }
    });

    function updateChartColors() {
      scheduleChart.options.plugins.legend.labels.color = body.classList.contains('dark-mode') ? '#f8f9fa' : '#212529';
      scheduleChart.options.scales.x.ticks.color = body.classList.contains('dark-mode') ? '#f8f9fa' : '#212529';
      scheduleChart.options.scales.y.ticks.color = body.classList.contains('dark-mode') ? '#f8f9fa' : '#212529';
      scheduleChart.update();
    }

    // Placeholder addSchedule function
    function addSchedule(e) {
      e.preventDefault();
      alert('Trip added! (JS logic can be implemented here)');
    }
  </script>
</body>

</html>
