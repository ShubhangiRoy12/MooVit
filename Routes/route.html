<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="icon" href="../favicon.png">
  <title>ðŸ§­ Routes â€” MooVit</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="route.css">
</head>

<body>
  <!-- Enhanced Header -->
  <header class="navbar navbar-expand-lg sticky-top shadow-sm">
    <div class="container">
      <div class="d-flex align-items-center">
        <h2 class="h4 mb-0 text-white me-3">ðŸ§­ Routes Dashboard</h2>
        <span class="badge bg-light text-primary fs-6" id="liveTime"></span>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-light btn-sm" id="refreshBtn">
          <i class="bi bi-arrow-clockwise"></i> Refresh
        </button>
        <a href="../main.html" class="btn btn-outline-light">
          <i class="bi bi-house"></i> Home
        </a>
      </div>
    </div>
  </header>

  <main class="container my-4">
    <!-- Enhanced Summary Cards -->
    <div class="row g-3 mb-4">
      <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="stat-card border-start border-primary border-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-play-circle text-primary fs-2 me-3"></i>
            <div>
              <h6 class="text-muted mb-1">Active Routes</h6>
              <h3 class="mb-0" id="statActive">0</h3>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="stat-card border-start border-info border-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-speedometer2 text-info fs-2 me-3"></i>
            <div>
              <h6 class="text-muted mb-1">Avg Distance</h6>
              <h3 class="mb-0"><span id="statAvg">0</span> km</h3>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="stat-card border-start border-success border-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-check-circle text-success fs-2 me-3"></i>
            <div>
              <h6 class="text-muted mb-1">Completed</h6>
              <h3 class="mb-0" id="statComp">0</h3>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="stat-card border-start border-warning border-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-clock text-warning fs-2 me-3"></i>
            <div>
              <h6 class="text-muted mb-1">Delayed</h6>
              <h3 class="mb-0" id="statDelayed">0</h3>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="stat-card border-start border-danger border-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-hourglass text-danger fs-2 me-3"></i>
            <div>
              <h6 class="text-muted mb-1">Avg ETA</h6>
              <h3 class="mb-0"><span id="statETA">0</span> min</h3>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="stat-card border-start border-secondary border-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-fuel-pump text-secondary fs-2 me-3"></i>
            <div>
              <h6 class="text-muted mb-1">Fuel Cost</h6>
              <h3 class="mb-0">â‚¹<span id="statFuel">0</span></h3>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Time Calculator Tool -->
    <div class="card mb-4 shadow-sm">
      <div class="card-header bg-gradient-primary text-white">
        <h5 class="mb-0"><i class="bi bi-calculator"></i> Route Time Calculator</h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-3">
            <label class="form-label">Distance (km)</label>
            <input type="number" class="form-control" id="calcDistance" placeholder="Enter distance" min="1">
          </div>
          <div class="col-md-3">
            <label class="form-label">Average Speed (km/h)</label>
            <select class="form-select" id="calcSpeed">
              <option value="40">City Traffic (40 km/h)</option>
              <option value="60" selected>Normal Traffic (60 km/h)</option>
              <option value="80">Highway (80 km/h)</option>
              <option value="100">Express Highway (100 km/h)</option>
              <option value="custom">Custom Speed</option>
            </select>
            <input type="number" class="form-control mt-2 d-none" id="customSpeed" placeholder="Enter custom speed" min="1">
          </div>
          <div class="col-md-2">
            <label class="form-label">Traffic Factor</label>
            <select class="form-select" id="trafficFactor">
              <option value="1">No Traffic</option>
              <option value="1.2" selected>Light Traffic</option>
              <option value="1.5">Heavy Traffic</option>
              <option value="2">Peak Hours</option>
            </select>
          </div>
          <div class="col-md-2">
            <label class="form-label">Stops</label>
            <input type="number" class="form-control" id="calcStops" value="0" min="0" max="10">
          </div>
          <div class="col-md-2 d-flex align-items-end">
            <button class="btn btn-primary w-100" id="calculateBtn">
              <i class="bi bi-calculator"></i> Calculate
            </button>
          </div>
        </div>
        <div class="mt-3" id="calculatorResult"></div>
      </div>
    </div>

    <!-- Charts -->
    <div class="row mb-4">
      <div class="col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-header">
            <h6 class="mb-0"><i class="bi bi-bar-chart"></i> Distance Trends (Last 7 Days)</h6>
          </div>
          <div class="card-body">
            <canvas id="trendChart" height="200"></canvas>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-header">
            <h6 class="mb-0"><i class="bi bi-pie-chart"></i> Route Status Distribution</h6>
          </div>
          <div class="card-body">
            <canvas id="statusChart" height="200"></canvas>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-header">
            <h6 class="mb-0"><i class="bi bi-graph-up"></i> Average Travel Time</h6>
          </div>
          <div class="card-body">
            <canvas id="timeChart" height="200"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced Routes Table -->
    <div class="card shadow-sm mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="bi bi-table"></i> Routes Management</h5>
        <div class="d-flex gap-2">
          <button class="btn btn-outline-secondary btn-sm" id="exportBtn">
            <i class="bi bi-download"></i> Export
          </button>
          <button id="addBtn" class="btn btn-primary btn-sm">
            <i class="bi bi-plus-circle"></i> Add Route
          </button>
        </div>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle" id="routesTable">
            <thead class="table-dark">
              <tr>
                <th><i class="bi bi-hash"></i> Route ID</th>
                <th><i class="bi bi-geo-alt"></i> Origin</th>
                <th><i class="bi bi-pin-map"></i> Destination</th>
                <th><i class="bi bi-activity"></i> Status</th>
                <th><i class="bi bi-rulers"></i> Distance</th>
                <th><i class="bi bi-clock"></i> Est. Time</th>
                <th><i class="bi bi-fuel-pump"></i> Fuel Cost</th>
                <th><i class="bi bi-calendar"></i> Start Time</th>
                <th><i class="bi bi-gear"></i> Actions</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div id="emptyState" class="text-center text-muted py-5">
          <i class="bi bi-inbox display-1 text-muted"></i>
          <h4>No routes added yet</h4>
          <p>Click "Add Route" to get started with route management</p>
        </div>
      </div>
    </div>
  </main>

  <footer class="bg-light py-3 mt-5">
    <div class="container text-center">
      <small class="text-muted">&copy; 2025 Transport Co. | Enhanced Route Management System</small>
    </div>
  </footer>

  <!-- Enhanced Modal -->
  <div class="modal fade" id="modal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <form class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title"><i class="bi bi-plus-circle"></i> Add New Route</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Route ID</label>
              <input id="routeId" class="form-control" placeholder="e.g., RT001" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Vehicle Type</label>
              <select id="vehicleType" class="form-select">
                <option value="Bus">Bus</option>
                <option value="Truck">Truck</option>
                <option value="Van">Van</option>
                <option value="Car">Car</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label">Origin</label>
              <input id="origin" class="form-control" placeholder="Starting point" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Destination</label>
              <input id="destination" class="form-control" placeholder="End point" required>
            </div>
            <div class="col-md-4">
              <label class="form-label">Status</label>
              <select id="status" class="form-select" required>
                <option value="" disabled selected>Select Status</option>
                <option value="On schedule">On Schedule</option>
                <option value="Delayed">Delayed</option>
                <option value="Completed">Completed</option>
                <option value="In Transit">In Transit</option>
              </select>
            </div>
            <div class="col-md-4">
              <label class="form-label">Distance (km)</label>
              <div class="input-group">
                <button type="button" id="decDist" class="btn btn-outline-secondary">-</button>
                <input id="distance" type="number" class="form-control text-center" value="1" min="1">
                <button type="button" id="incDist" class="btn btn-outline-secondary">+</button>
              </div>
            </div>
            <div class="col-md-4">
              <label class="form-label">Average Speed (km/h)</label>
              <input id="avgSpeed" type="number" class="form-control" value="60" min="1" max="120">
            </div>
            <div class="col-md-6">
              <label class="form-label">Start Time</label>
              <input id="startTime" type="datetime-local" class="form-control">
            </div>
            <div class="col-md-6">
              <label class="form-label">Priority</label>
              <select id="priority" class="form-select">
                <option value="Low">Low</option>
                <option value="Medium" selected>Medium</option>
                <option value="High">High</option>
                <option value="Critical">Critical</option>
              </select>
            </div>
          </div>
          <div class="mt-3 p-3 bg-light rounded" id="routePreview"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-success">
            <i class="bi bi-save"></i> Save Route
          </button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="route.js"></script>
</body>

</html>